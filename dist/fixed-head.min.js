angular.module("fixedHeadTable",[]),angular.module("fixedHeadTable").directive("fixedHead",["$timeout",function(a){"use strict";return{link:function(b,c){var d=angular,e=function(a,b){var c=[];return d.forEach(a,function(){c.push(b.apply(this,arguments))}),c},f=function(a){var b=a.offsetWidth+"px";a.style.width=b;var c=a.offsetHeight+"px";a.style.height=c},g=null,h=function(){if(g)return g;var a=c.find("thead"),b=c.find("tbody"),d=c.find("tfoot");return g={table:{height:parseInt(c.css("height"),10),maxHeight:parseInt(c.css("maxHeight"),10)},thead:{height:a[0]?a[0].offsetHeight:0},tbody:{firstRow:{colWidths:e(b.find("tr")[0].children,function(a){return a.offsetWidth})}},tfoot:{height:d[0]?d[0].offsetHeight:0}}},i=function(){var a=c.find("tbody"),b=d.element(a.find("tr")[0]).children(),e=h();angular.forEach(b,function(a,b){d.element(a).css("width",e.tbody.firstRow.colWidths[b]+"px")})},j=function(){var a=h(),b=c.find("thead"),d=c.find("tbody"),e=c.find("tfoot"),g=b.find("tr").children(),j=e.find("tr").children();angular.forEach(g,f),angular.forEach(j,f),i(),c.css("position","relative"),b.css("position","absolute"),d.css("position","relative"),e.css("position","absolute"),b.css("display","block"),d.css("display","block"),e.css("display","block");var k=a.thead.height,l=a.tfoot.height;d.css("marginTop",k+"px"),d.css("marginBottom",l+"px"),e.css("thead",0),e.css("bottom",0),a.table.maxHeight?(d.css("maxHeight",a.table.maxHeight-k-l+"px"),d.css("overflow","scroll")):(d.css("height",a.table.height-k-l+"px"),d.css("overflow","scroll"))};a(function(){j(),b.$watch(function(){return c.find("tbody").find("tr")[0]},i)})}}}]);